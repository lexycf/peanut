webpackJsonp([14],{X2y3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"accident",data:function(){return{imgNum:4}},methods:{change_input:function(){for(var t=$("#addTextForm input"),e="",i=0;i<t.length;i++)if(!t[i].value){e=t[i].id;break}if(e)return $("#"+e).click();alert("最多选择"+this.imgNum+"张图片")},setImg:function(t){var e,i=t.target;$("#img_"+i.id).attr("src",(e=t.srcElement,window.URL.createObjectURL(e.files.item(0))))},deleteImg:function(t){var e=t.target,i="";"IMG"==e.nodeName&&(e.src="",i=e.id.replace("img_",""),$("input#"+i).val(""))},submit:function(){$("#addTextForm").ajaxSubmit({url:this.$root.api+"/Index/staff_accident/add",type:"post",data:{total_price:this.price,descript:this.descript},success:function(t){0==t.code?(console.log("提交成功"),$("#addTextForm input").val(""),$("div#img-wrapper img").attr("src","")):alert("提交失败")}})}},mounted:function(){for(var t=0;t<this.imgNum;t++){var e=$('<input type="file" name="image" />');e.attr("id",t),$("#addTextForm").append(e);var i=$('<img src="">');i.attr("id","img_"+t),i.css({"max-width":"50%","max-height":"200px"}),$("#img-wrapper").append(i)}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"accident"}},[i("div",{staticClass:"wrapper"},[i("i",{staticClass:"icon-pic"}),t._v("相关照片\n        "),i("button",{attrs:{type:"button"},on:{click:function(e){t.change_input()}}},[t._v("上传照片")]),t._v(" "),i("form",{attrs:{id:"addTextForm"},on:{change:function(e){t.setImg(e)}}})]),t._v(" "),i("div",{attrs:{id:"img-wrapper"},on:{click:function(e){t.deleteImg(e)}}}),t._v(" "),i("P",{staticClass:"btn-wrapper"})],1)},staticRenderFns:[]},r=i("VU/8")(a,n,!1,null,null,null);e.default=r.exports}});
//# sourceMappingURL=14.4c8c2b92c588ff3e4921.js.map